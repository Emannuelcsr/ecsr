<?xml version="1.0" encoding="UTF-8"?>
<!-- 
  Arquivo de configuração do JSF (JavaServer Faces) 2.0.
  Define configurações globais da aplicação, como integração com Spring, escopos customizados (ViewScope),
  e handlers do PrimeFaces para diálogos.
-->

<faces-config version="2.0"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
    http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">

    <!-- Seção de configurações gerais da aplicação -->
    <application>

        <!-- Integração com Spring: permite usar beans gerenciados pelo Spring no JSF via EL (#{bean}). -->
        <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>

        <!-- 
          Configura listeners para o escopo customizado "ViewScope":
          - Registra callbacks quando a view é criada (PostConstructViewMapEvent) ou destruída (PreDestroyViewMapEvent).
          - Útil para limpar recursos ou estados do escopo de view.
        -->
        <system-event-listener>
            <system-event-listener-class>br.com.project.been.geral.ViewScopeCallBackRegister</system-event-listener-class>
            <system-event-class>javax.faces.event.PostConstructViewMapEvent</system-event-class>
            <source-class>javax.faces.component.UIViewRoot</source-class>
        </system-event-listener>

        <system-event-listener>
            <system-event-listener-class>br.com.project.been.geral.ViewScopeCallBackRegister</system-event-listener-class>
            <system-event-class>javax.faces.event.PreDestroyViewMapEvent</system-event-class>
            <source-class>javax.faces.component.UIViewRoot</source-class>
        </system-event-listener>

        <!-- 
          Configurações do PrimeFaces para diálogos:
          - DialogActionListener: Gerencia ações em diálogos (ex: abrir/fechar).
          - DialogNavigationHandler: Controla navegação entre diálogos.
          - DialogViewHandler: Customiza o carregamento de views em diálogos.
        -->
        <action-listener>org.primefaces.application.DialogActionListener</action-listener>
        <navigation-handler>org.primefaces.application.DialogNavigationHandler</navigation-handler>
        <view-handler>org.primefaces.application.DialogViewHandler</view-handler>
    </application>
    
    <factory>
    
        <!-- 
      Configura uma fábrica de Exception Handler customizada para o JSF.
      - Substitui o tratamento padrão de exceções do JSF por uma implementação específica do projeto.
      - Útil para centralizar o tratamento de erros, logar exceções ou exibir mensagens amigáveis.
    -->
    <exception-handler-factory>br.com.project.exception.CustomExceptionHandleFactory</exception-handler-factory>
    </factory>
    
    
</faces-config>