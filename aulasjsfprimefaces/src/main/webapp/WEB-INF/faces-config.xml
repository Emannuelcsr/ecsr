<?xml version="1.0" encoding="UTF-8"?>

<!-- 
  Arquivo de configuraÃ§Ã£o do JSF (JavaServer Faces) 2.0.
  Define configuraÃ§Ãµes globais da aplicaÃ§Ã£o, como:
  - IntegraÃ§Ã£o com o Spring Framework
  - Suporte a escopos customizados (ex: ViewScope)
  - ConfiguraÃ§Ãµes especiais do PrimeFaces para suporte a diÃ¡logos
  - Tratamento de exceÃ§Ãµes com handler customizado
-->

<faces-config version="2.0"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                        http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">

    <!-- ======================================================================== -->
    <!-- ðŸ”§ SeÃ§Ã£o: ConfiguraÃ§Ãµes da AplicaÃ§Ã£o                                    -->
    <!-- ======================================================================== -->
    
    <application>

        <!-- ðŸŽ¯ IntegraÃ§Ã£o com Spring:
             Permite usar beans do Spring diretamente nas pÃ¡ginas JSF (via EL, ex: #{meuBean}).
        -->
        <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>


        <!-- ðŸ“Œ Suporte ao escopo ViewScope com callbacks de ciclo de vida:
             - PostConstructViewMapEvent: Quando a view Ã© criada
             - PreDestroyViewMapEvent: Quando a view Ã© destruÃ­da
             - Register: Classe que escuta os eventos e executa callbacks necessÃ¡rios
        -->
        <system-event-listener>
            <system-event-listener-class>br.com.project.been.geral.ViewScopeCallBackRegister</system-event-listener-class>
            <system-event-class>javax.faces.event.PostConstructViewMapEvent</system-event-class>
            <source-class>javax.faces.component.UIViewRoot</source-class>
        </system-event-listener>

        <system-event-listener>
            <system-event-listener-class>br.com.project.been.geral.ViewScopeCallBackRegister</system-event-listener-class>
            <system-event-class>javax.faces.event.PreDestroyViewMapEvent</system-event-class>
            <source-class>javax.faces.component.UIViewRoot</source-class>
        </system-event-listener>


        <!-- ðŸ’¬ IntegraÃ§Ã£o com diÃ¡logos do PrimeFaces:
             - DialogActionListener: Trata aÃ§Ãµes internas dos diÃ¡logos (botÃµes, eventos)
             - DialogNavigationHandler: Controla a navegaÃ§Ã£o entre diÃ¡logos
             - DialogViewHandler: ResponsÃ¡vel por renderizar views dentro de diÃ¡logos
        -->
        <action-listener>org.primefaces.application.DialogActionListener</action-listener>
        <navigation-handler>org.primefaces.application.DialogNavigationHandler</navigation-handler>
        <view-handler>org.primefaces.application.DialogViewHandler</view-handler>

    </application>


    <!-- ======================================================================== -->
    <!-- ðŸ­ SeÃ§Ã£o: FÃ¡bricas customizadas (Factories)                             -->
    <!-- ======================================================================== -->

    <factory>

        <!-- âš ï¸ Handler customizado de exceÃ§Ãµes:
             - Substitui o tratamento padrÃ£o de erros JSF
             - Permite logar, exibir mensagens customizadas, ou tomar aÃ§Ãµes especÃ­ficas
        -->
        <exception-handler-factory>
            br.com.project.exception.CustomExceptionHandleFactory
        </exception-handler-factory>

    </factory>

</faces-config>
