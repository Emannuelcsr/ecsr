<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xsi:schemaLocation="
           http://www.springframework.org/schema/mvc 
           http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
           http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/context 
           http://www.springframework.org/schema/context/spring-context-3.0.xsd
           http://www.springframework.org/schema/tx 
           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd"
	default-lazy-init="true">


	<!-- ========================================================= -->
	<!-- ðŸ”§ ConfiguraÃ§Ãµes Globais do Spring MVC -->
	<!-- ========================================================= -->

	<!-- ðŸ’¬ Suporte a anotaÃ§Ãµes como @Autowired, @PostConstruct -->
	<context:annotation-config />

	<!-- ðŸ’¬ Suporte a @Controller, @RequestMapping, etc -->
	<mvc:annotation-driven />

	<!-- ðŸ’¬ Suporte a recursos estÃ¡ticos pelo servlet padrÃ£o -->
	<mvc:default-servlet-handler />

	<!-- ðŸ’¬ Cache e mapeamento de arquivos estÃ¡ticos (img, css, js) -->
	<mvc:resources location="/resources/img"
		mapping="/resources/**" cache-period="5000" />



	<!-- ========================================================= -->
	<!-- ðŸ§­ Component-Scan: LocalizaÃ§Ã£o de Beans Spring -->
	<!-- ========================================================= -->

	<context:component-scan
		base-package="br.com.project.geral.controller" />
	<context:component-scan
		base-package="br.com.srv.interfaces" />
	<context:component-scan
		base-package="br.com.srv.implementacao" />
	<context:component-scan
		base-package="br.com.repository.interfaces" />
	<context:component-scan
		base-package="br.com.dao.implementacao" />
	<context:component-scan
		base-package="br.com.project.bean.view" />
	<context:component-scan
		base-package="br.com.project.been.geral" />
	<context:component-scan
		base-package="br.com.project.report.util" />
	<context:component-scan
		base-package="br.com.project.util.all" />
	<context:component-scan
		base-package="br.com.project.bean.view.grafico" />
	<context:component-scan
		base-package="br.com.framework.controller.crud" />
	<context:component-scan
		base-package="br.com.framwork.interfac.crud" />



	<!-- ========================================================= -->
	<!-- ðŸ’¾ DataSource JNDI do Tomcat -->
	<!-- ========================================================= -->

	<bean id="springDataSource" name="springDataSource"
		class="org.springframework.jndi.JndiObjectFactoryBean"
		lazy-init="false">
		<property name="jndiName">
			<value>java:/comp/env/jdbc/datasource</value>
		</property>
	</bean>



	<!-- ========================================================= -->
	<!-- ðŸ¦ Flyway: MigraÃ§Ã£o e versionamento de banco de dados -->
	<!-- ========================================================= -->

	<bean id="flyway" class="org.flywaydb.core.Flyway"
		init-method="migrate" lazy-init="false">
		<property name="dataSource" ref="springDataSource" />
		<property name="baselineOnMigrate" value="true" />
		<property name="table" value="version" />
		<property name="sqlMigrationPrefix" value="v" />
		<property name="sqlMigrationSeparator" value="_" />
		<property name="encoding" value="ISO-8859-1" />
		<property name="validateOnMigrate" value="true" />
	</bean>



	<!-- ========================================================= -->
	<!-- ðŸ” Gerenciamento de TransaÃ§Ãµes JDBC -->
	<!-- ========================================================= -->

	<bean id="transactionManager" name="transactionManager"
		class="org.springframework.jdbc.datasource.DataSourceTransactionManager"
		lazy-init="false">
		<property name="dataSource" ref="springDataSource" />
	</bean>



	<!-- ========================================================= -->
	<!-- ðŸ› ï¸ Beans Customizados para Acesso JDBC -->
	<!-- ========================================================= -->

	<!-- âœ… JdbcTemplate customizado -->
	<bean id="jdbcTemplate" name="jdbcTemplate"
		class="br.com.framwork.implementacao.crud.JDBCTemplateImpl">
		<constructor-arg name="dataSource"
			ref="springDataSource" />
	</bean>

	<!-- âœ… SimpleJdbcTemplate customizado -->
	<bean id="simpleJdbcTemplate" name="simpleJdbcTemplate"
		class="br.com.framwork.implementacao.crud.SimpleJDBCTemplateImpl">
		<constructor-arg name="dataSource"
			ref="springDataSource" />
	</bean>

	<!-- âœ… SimpleJdbcInsert customizado -->
	<bean id="simpleJdbcInsert" name="simpleJdbcInsert"
		class="br.com.framwork.implementacao.crud.SimpleJDBCInsertImpl">
		<constructor-arg name="dataSource"
			ref="springDataSource" />
	</bean>

	<!-- âœ… Classe utilitÃ¡ria JDBC -->
	<bean id="simpleJdbcClassImpl" name="simpleJdbcClassImpl"
		class="br.com.framwork.implementacao.crud.SimpleJDBCClassImpl">
		<constructor-arg name="dataSource"
			ref="springDataSource" />
	</bean>



	<!-- ========================================================= -->
	<!-- ðŸŒ Mapeamento de URLs via SimpleUrlHandlerMapping -->
	<!-- ========================================================= -->

	<bean id="urlMapping"
		class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"
		lazy-init="false">
		<property name="mappings">
			<props>
				<prop key="/index.jsp">indexController</prop>
			</props>
		</property>
	</bean>



	<!-- ========================================================= -->
	<!-- ðŸ–¼ï¸ ViewResolver para localizar pÃ¡ginas de view -->
	<!-- ========================================================= -->

	<bean id="viewResolver"
		class="org.springframework.web.servlet.view.InternalResourceViewResolver"
		lazy-init="false">
		<property name="viewClass"
			value="org.springframework.web.servlet.view.JstlView" />
		<property name="prefix" value="/src/" />
		<property name="suffix"
			value="*.jsf, *.xhtml, *.html, *,jsp, *.js" />
	</bean>



	<!-- ========================================================= -->
	<!-- ðŸ§© Controller direto para "/index.jsp" sem lÃ³gica -->
	<!-- ========================================================= -->

	<bean name="indexController" lazy-init="false"
		class="org.springframework.web.servlet.mvc.ParameterizableViewController" />



	<!-- ========================================================= -->
	<!-- ðŸ‘ï¸ Registro do escopo "view" no Spring -->
	<!-- ========================================================= -->

	<bean
		class="org.springframework.beans.factory.config.CustomScopeConfigurer"
		lazy-init="false">
		<property name="scopes">
			<map>
				<entry key="view">
					<bean class="br.com.project.been.geral.ViewScope" />
				</entry>
			</map>
		</property>
	</bean>



	<!-- ========================================================= -->
	<!-- ðŸ“Š Beans UtilitÃ¡rios e Controladores Globais da AplicaÃ§Ã£o -->
	<!-- ========================================================= -->

	<!-- ðŸ“ UtilitÃ¡rio de geraÃ§Ã£o de relatÃ³rios JasperReports - Classe: br.com.project.report.util.ReportUtil 
		- ResponsÃ¡vel por carregar, preencher e exportar relatÃ³rios (.jasper) - Escopo: 
		singleton (Ãºnica instÃ¢ncia para toda aplicaÃ§Ã£o) -->
	<bean id="reportUtil"
		class="br.com.project.report.util.ReportUtil" />

	<!-- ðŸ§  UtilitÃ¡rio geral de sessÃ£o - Classe: br.com.frameworks.utils.utilFramework 
		- ContÃ©m mÃ©todos auxiliares como acesso ao usuÃ¡rio logado, limpeza de sessÃ£o, 
		etc. - Escopo: session (nova instÃ¢ncia para cada usuÃ¡rio que abrir sessÃ£o) -->
	<bean id="utilFramework"
		class="br.com.frameworks.utils.utilFramework" scope="session" />

	<!-- ðŸ” Controlador central de sessÃµes HTTP - Classe: br.com.project.geral.controller.SessioControllerImpl 
		- Armazena e invalida sessÃµes de usuÃ¡rios logados - Ãštil em logout forÃ§ado, 
		controle de sessÃµes ativas, seguranÃ§a - Escopo: singleton (gerenciado para 
		toda aplicaÃ§Ã£o) -->
	<bean id="sessionController"
		class="br.com.project.geral.controller.SessioControllerImpl"
		scope="singleton" />

	<!-- ðŸ“‚ RepositÃ³rio para autenticaÃ§Ã£o de login - Interface de acesso a dados 
		para usuÃ¡rios e login (DAO) - Normalmente implementa operaÃ§Ãµes com JPA/Hibernate 
		- Escopo: singleton (Ãºnico DAO compartilhado) -->
	<bean id="repositoryLogin"
		class="br.com.dao.implementacao.DaoLogin" scope="singleton" />


	<bean id="srvLogin" class="br.com.srv.implementacao.SrvLoginImpl" />


</beans>
