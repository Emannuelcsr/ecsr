<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:sec="http://www.springframework.org/security/facelets/tags"
	xmlns:util="http://java.sun.com/jsf/composite/components"
	xmlns:p="http://primefaces.org/ui">


<h:form id="formCadastroMensagemDialog" prependId="false">
	<c:set var="isCadastro" value="true" scope="view" />

	<p:panel header="Cadastro de Mensagem" id="panelCadastroMensagemDialog">
		<p:panelGrid id="gridMsgDialog" columns="3">

			<p:column>
				<p:row>
					<h:outputLabel for="idMsgDialog" value="Código: "
						id="labelIdMsgDialog" style="width:300px" />

				</p:row>
			</p:column>

			<p:column>
				<p:row>
					<p:inputText id="idMsgDialog" readonly="true"
						value="#{mensagemBeanView.objetoSelecionado.men_codigo}" />
				</p:row>
			</p:column>

			<p:column>
				<p:row></p:row>
			</p:column>

			<p:column>
				<p:row>
					<h:outputLabel for="usr_origemMsgDialog" value="Origem: "
						id="labelOrigemDialog" />
				</p:row>
			</p:column>

			<p:column>
				<p:row>

					<p:inputText id="usr_origemMsgDialog" readonly="true"
						immediate="true"
						value="#{mensagemBeanView.objetoSelecionado.usr_origem.ent_codigo}" />

					<p:inputText id="loginOrigemMsgDialog" readonly="true"
						required="true" immediate="true" style="width:376px"
						requiredMessage="Usuário logado não carregado"
						value="#{mensagemBeanView.objetoSelecionado.usr_origem.ent_login}" />
				</p:row>
			</p:column>

			<p:column>
				<p:row>
					<p:message for="loginOrigemMsgDialog" />
				</p:row>
			</p:column>

			<p:column>
				<p:row>
					<h:outputLabel id="labelDestinoMsgDialog"
						for="usr_destinoMsgDialog" value="Destino: " />
				</p:row>
			</p:column>


			<p:column>
				<p:row>
					<p:inputText id="usr_destinoMsgDialog" immediate="false"
						required="true" requiredMessage="Informe o usuario de destino"
						value="#{mensagemBeanView.objetoSelecionado.usr_destino.ent_login}"
						onblur="pesquisaUserDestinoPerderFocoDialog(this.value);" />

					<p:commandButton id="buttonPesquisarDestinoDialog"
						icon="imgPesquisa" ajax="true"
						oncomplete="destinoDialogMsg.show();" immediate="true">

					</p:commandButton>




					<p:inputText id="loginDestinoMsgDialog" readonly="true"
						immediate="true"
						value="#{mensagemBeanView.objetoSelecionado.usr_destino.ent_login}"
						required="true" requiredMessage="Informe o usuario de destino"
						style="width:376px" />
				</p:row>
			</p:column>


			<p:column>
				<p:row>
					<p:message for="usr_destinoMsgDialog" />
				</p:row>
			</p:column>


			<p:column>
				<p:row>
					<h:outputLabel id="labelExigeMsgResposta"
						for="men_exigeRespostaDialog" value="Exige Resposta: " />
				</p:row>
			</p:column>


			<p:column>
				<p:row>
					<p:selectBooleanCheckbox id="men_exigeRespostaDialog"
						value="#{mensagemBeanView.objetoSelecionado.men_exigirresposta}" />
				</p:row>
			</p:column>

			<p:column>
				<p:row>
					<p:message for="men_exigeRespostaDialog" />
				</p:row>
			</p:column>


			<p:column>
				<p:row>
					<h:outputLabel id="labelDataMsgDialog" for="men_dataHoraMsgDialog"
						value="Data Envio: " />
				</p:row>
			</p:column>


			<p:column>
				<p:row>
					<p:inputText
						value="#{mensagemBeanView.objetoSelecionado.men_datahora}"
						id="men_dataHoraMsgDialog" readonly="true">
						<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy HH:mm:ss"
							dateStyle="long" timeStyle="full" timeZone="GMT-03:00" />
					</p:inputText>
				</p:row>
			</p:column>

			<p:column>
				<p:row>
					<p:message for="men_dataHoraMsgDialog" />
				</p:row>
			</p:column>


			<p:column>
				<p:row>
					<h:outputLabel for="men_assuntoMsgDialog"
						id="labelAssuntoMsgDialog" value="Assunto: " />
				</p:row>

			</p:column>

			<p:column>
				<p:row>
					<p:inputText id="men_assuntoMsgDialog" style="width:502px"
						value="#{mensagemBeanView.objetoSelecionado.men_assunto}"
						immediate="false" required="true"
						requiredMessage="Informe o Assunto" maxlength="80" />
				</p:row>
			</p:column>

			<p:column>
				<p:row>
					<p:message for="men_assuntoMsgDialog" />
				</p:row>
			</p:column>

			<p:column>
				<p:row>
					<h:outputLabel id="labelMsgMsgDialog" for="men_msgMsgDialog"
						value="Mensagem: " />
				</p:row>
			</p:column>


			<p:column>
				<p:row>
					<p:inputTextarea id="men_msgMsgDialog" autoResize="true"
						immediate="false" required="true"
						requiredMessage="Informe a mensagem a ser enviada" maxlength="500"
						style="height:110px; width:502px;"
						value="#{mensagemBeanView.objetoSelecionado.men_mensagem}" />
				</p:row>
			</p:column>

			<p:column>
				<p:row>
					<p:message for="men_msgMsgDialog" />

				</p:row>
			</p:column>
		</p:panelGrid>
	</p:panel>


	<p:spacer height="30px" />

	<p:commandButton value="Novo/Limpar"
		style="height:40px; width:100px; background:#CDCDC1; border:1px solid #FFFFFF;"
		rendered="#{contextoBean.possuiAcesso('MENSAGENS_ENVIAR_NOVO','ADMIN')}"
		actionListener="#{mensagemBeanView.novo}" ajax="true" id="buttonNovo"
		immediate="false"
		update="formCadastroMensagemDialog, :formTemplate:msg">
		<p:ajax listener="#{mensagemBeanView.novo}" />
	</p:commandButton>


	<p:commandButton value="Cancelar"
		style="height:40px; width:100px; background:#CDCDC1; border:1px solid #FFFFFF;"
		onclick="enviarMsgDialog.hide();"
		actionListener="#{mensagemBeanView.novo}" ajax="true"
		id="buttonCancelar" immediate="false"
		update="formCadastroMensagemDialog, :formTemplate:msg" />


	<p:commandButton value="Enviar"
		style="height:40px; width:100px; background:#CDCDC1; border:1px solid #FFFFFF;"
		actionListener="#{mensagemBeanView.saveNotReturn}" ajax="true"
		rendered="#{contextoBean.possuiAcesso('MENSAGENS_ENVIAR_NOVO','ADMIN')}"
		id="buttonEnviar" immediate="false" partialSubmit="true"
		process="@this, @form"
		update="formCadastroMensagemDialog, :formTemplate:msg" />

	<p:dialog widgetVar="destinoDialogMsg" id="destinoDialogMsg"
		modal="false" resizable="false" height="400px" dynamic="true"
		appendToBody="false" header="Consulta usuario destino">

		
		<util:pesquisa managedBeanView="#{funcionarioBeanView}"
		ocultaNovo="true"
		novoPesquisa="Pesquisa Funcionário"
		colunasGridDataTableList="/resources/components/colunasDataTableFuncionairos.xhtml"
		funcaoJS="pesquisaUserDestinoPerderFocoDialog(#{objeto.ent_codigo}),destinoDialogMsg.hide();"
		exibirBotaoSelecionar = "true"
		>
		
		</util:pesquisa>



	</p:dialog>



</h:form>



</html>
